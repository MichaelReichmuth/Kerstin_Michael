unfaelle_clean %>%
filter(on_velostrasse == TRUE) %>%
ggplot(aes(diff_months)) +
geom_histogram(binwidth = 6, fill = "pink", color = "grey30") +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 15, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Amount of Accidents") +
theme_minimal()
ggplot(unfaelle_clean, aes(date_accident)) +
geom_histogram()
ggplot(unfaelle_clean, aes(date_accident)) +
geom_histogram()
unfaelle_clean %>%
filter(on_velostrasse == TRUE) %>%
ggplot(aes(diff_months)) +
geom_histogram(binwidth = 6, fill = "pink", color = "grey30") +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 15, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Amount of Accidents") +
theme_minimal()
table(unfaelle_clean$on_velostrasse, unfaelle_clean$fahrrd_bet)
table(unfaelle_clean$fahrrd_bet)
table(unfaelle_clean$on_velostrasse, unfaelle_clean$fahrrd_bet)
table(unfaelle_clean$on_velostrasse, unfaelle_clean$fahrrd_bet, unfaelle_clean$jahr)
table(unfaelle_clean$on_velostrasse, unfaelle_clean$fahrrd_bet)
table(unfaelle_clean$wochentag)
p <- unfaelle_clean %>%
filter(on_velostrasse == TRUE) %>%
ggplot(aes(diff_months)) +
geom_histogram(binwidth = 6, fill = "pink", color = "grey30") +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 15, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Amount of Accidents") +
theme_minimal()
print(p)
ggsave("Plot_1.jpeg", plot = p, width = 12, height = 8, dpi = 600)
unfaelle_clean %>%
group_by(diff_months) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n())
p <- unfaelle_clean %>%
group_by(diff_months) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(diff_months, relative_ov)) +
geom_point() +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 15, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Relative amount of accidents on velostreets compared to All Accidents during that year") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(diff_months) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(diff_months, relative_ov)) +
geom_point() +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 1, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Relative amount of accidents on velostreets compared to All Accidents during that year") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(diff_months) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(diff_months, relative_ov)) +
geom_point() +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 0.25, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Relative amount of accidents on velostreets compared to All Accidents during that year") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(diff_months, relative_ov)) +
geom_point() +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 0.25, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Relative amount of accidents on velostreets compared to All Accidents during that year") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = 0, color = "red", linetype = 1, size = 0.5) +
geom_text(aes(x = 6, y = 0.25, label = "Transition to velostreet"),
vjust = -1, hjust = 1.2, color = "red", size = 4) +
scale_x_continuous(breaks = seq(floor(min(unfaelle_clean$diff_months) / 12) * 12,
ceiling(max(unfaelle_clean$diff_months) / 12) * 12,
by = 12)) +
xlab("Months relative to velostreet transition") +
ylab("Relative amount of accidents on velostreets compared to All Accidents during that year") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
xlab("Months relative to velostreet transition") +
ylab("Relative amount of accidents on velostreets compared to All Accidents during that year") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
xlab("") +
ylab("Proportion of accidents on velostrassen per year") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
xlab("") +
ylab("Proportion of accidents on velostrassen (before and after implementation)") +
geom_vline(xintercept = 2021, color = "red", linetype = 1, size = 0.5) +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
xlab("") +
ylab("Proportion of accidents on velostrassen (before and after implementation)") +
geom_vline(xintercept = "2021-01", color = "red", linetype = 1, size = 0.5) +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
xlab("") +
ylab("Proportion of accidents on velostrassen (before and after implementation)") +
theme_minimal()
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
xlab("") +
ylab("Proportion of accidents on velostrassen (before and after implementation)") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 1) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.5, label = "Estimated average year of implementation"),
angle = 90, color = "red", vjust = -0.5, hjust = 1.2, size = 4) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.5, label = "Estimated average year of implementation"),
angle = 90, color = "red", vjust = -0.5, hjust = 1.2, size = 2) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.5, label = "Estimated average year of implementation"),
angle = 90, color = "red", vjust = -0.5, hjust = 1.2, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.5, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 1.2, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.25, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 1.2, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 1.2, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 2, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = -1.2, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = (sum(on_velostrasse == TRUE) / n())*100) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = (sum(on_velostrasse == TRUE) / n())*100) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 10, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
library(scales)
library(scales)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = (sum(on_velostrasse == TRUE) / n())*100) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 10, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
scale_y_continuous(labels = scales::percent) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 10, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
scale_y_continuous(labels = scales::percent) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 10, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
scale_y_continuous(labels = scales::percent) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
scale_y_continuous(labels = scales::percent) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
p <- unfaelle_clean %>%
group_by(date_accident) %>%
summarise(relative_ov = sum(on_velostrasse == TRUE) / n()) %>%
ggplot(aes(date_accident, relative_ov)) +
geom_point() +
geom_smooth(color = "blue") +
geom_vline(xintercept = as.Date("2021-04-01"), color = "red", linetype = "dashed", size = 0.5) +
geom_text(aes(x = as.Date("2021-04-01"), y = 0.1, label = "Estimated average year of implementation"), color = "red", vjust = -0.5, hjust = 0.5, size = 3) +
scale_x_date(
breaks = seq(from = min(unfaelle_clean$date_accident),
to = max(unfaelle_clean$date_accident),
by = "2 years"),  # Set breaks every 2 years
date_labels = "%Y"  # Format the labels as years
) +
scale_y_continuous(labels = scales::percent) +
ggtitle("Proportion of accidents on velostrassen (before and after implementation)") +
xlab("") +
ylab("") +
theme_minimal()
print(p)
ggsave("Plot_2.jpeg", plot = p, width = 12, height = 8, dpi = 600)
